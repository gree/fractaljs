Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(d.prototype=this.prototype),e.prototype=new d,e}),function(a){var b="fractaljs-site-builder"===window.navigator.userAgent,c="f-component",d=function(){function a(a){if(a.source==window&&a.data==c&&(a.stopPropagation(),b.length>0)){var d=b.shift();d()}}var b=[],c=(new Date).getTime();return window.addEventListener("message",a,!0),function(a){b.push(a),window.postMessage(c,"*")}}(),e=function(a,b,c){var d,e;if(d=e=a.length)for(;d;)b(a[--d],function(){--e||c()});else c()},f=function(){var a={};return function(b,c,d){b in a?a[b].push(d):(a[b]=[d],c(function(c){var d=a[b],e=d.length;for(delete a[b];e;)c(d[--e])}))}},g=function(){var a={},b=0;return{publish:function(b,c,d){var e=a[b];for(var f in e)e[f].cb(b,c,d)},subscribe:function(c,d,e){a[c]||(a[c]=[]);var f=++b;return a[c].push({token:f,subscriber:d,cb:e}),f},unsubscribe:function(b,c){if(b in a){var d=a[b];for(var e in d)if(d[e].token===c){d.splice(e,1);break}0===d.length&&delete a[b]}},getSubscribers:function(b){return b in a?a[b].map(function(a){return a.subscriber}):[]}}}(),h=function(){var a={},b=f(),c={js:function(a,b){var c=document.createElement("script");c.src=a;var d=!1;c.onload=c.onreadystatechange=function(){var a=this.readyState;d||a&&"loaded"!=a&&"complete"!=a||(d=!0,b(!1,!0),c.onload=c.onreadystatechange=null)},document.getElementsByTagName("head")[0].appendChild(c)},css:function(a,b){var c=document.createElement("link");c.rel="stylesheet",c.href=a,document.getElementsByTagName("head")[0].appendChild(c),b(!1,!0)},ajax:function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){if(4===c.readyState){var a=c.status,d=c.responseText;200!==a&&0!==a||!d?b("unexpected server resposne: "+a):b(!1,d)}},c.send("")}},d=function(a){return c[a.split(".").pop()]||c.ajax},e=function(b,c){d(b)(b,function(d,e){a[b]=e,c(e)})};return function(c,d){c in a?d(a[c]):b(c,function(a){e(c,function(b){a(function(a){a(b)})})},d)}}(),i=function(){var a=function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,c=function(){};return c.extend=function(c){var d=this.prototype;a=!0;var e=new this;a=!1;for(var f in c)e[f]="function"==typeof c[f]&&"function"==typeof d[f]&&b.test(c[f])?function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);return this._super=c,e}}(f,c[f]):c[f];var g=function(){!a&&this.init&&this.init.apply(this,arguments)};return g.prototype=e,g.prototype.constructor=g,g.extend=arguments.callee,g},c}(),f=0,h=function(a){a()};return a.extend({init:function(a,b,c){var d=this;d.name=a,d.$container=b,d.f=c,d.id=f++,F.all[d.id]=d,d.$=d.$container.find.bind(d.$container),d.rendered=!1,d.subscribeList={},d.buffered=[],d.templateName=d.templateName||d.name,d.resetDisplay&&d.$container.css("display",d.resetDisplay),d.$container.on("destroyed",d.unload.bind(d)),"string"==typeof d.template&&(d.template=d.f.compile(d.template))},load:function(a,d){var e=this;return a=a||{},b&&e.alwaysRender?(e.rendered=!0,void(d&&d())):(e.rendered=!1,void e.getData(function(f,g){e.getTemplate(function(h){e.render(f,g,h,function(){e.afterRender(function(){e.rendered=!0,e.myselfLoaded(function(){e.loadChildren(function(){e.allLoaded(function(){b&&e.$container.removeAttr(c),d&&d()},a)},a)},a)},a)},a)},a)},a))},getData:h,getTemplate:function(a,b){var c=this;c.template?a(c.template):c.f.getTemplate(c.templateName,function(b){c.template||(c.template=c.f.compile(b)),a(c.template)})},render:function(a,b,c,d,e){var f=this,g=f.f.render(c,a,b);f.$container.html(g),d()},afterRender:h,myselfLoaded:function(a,b){for(var c=this.buffered;c.length>0;)c.pop()();a()},loadChildren:function(a,b){var f=this,g=f.$("["+c+"]"),h=g.length;return h?void e(g,function(a,e){var g=$(a),h=g.attr(c);f.f.requireComponent(h,function(a){var c=new a(h,g,f.f);!function(a,c){d(function(){a.load(b,c)})}(c,e)})},a):a()},allLoaded:h,unload:function(){this.unsubscribe(),delete F.all[this.id]},publish:function(a,b){g.publish(a,b,this)},subscribe:function(a,b){var c=this;c.subscribeList[a]=g.subscribe(a,c,function(a,d,e){c.rendered?b(a,d,e):c.buffered.push(function(){b(a,d,e)})})},unsubscribe:function(a){var b=this.subscribeList;if(a)a in b&&g.unsubscribe(a,b[a]);else for(var c in b)g.unsubscribe(c,b[c])}})}();!function(){var f=null,j=a.location,k="file:"===j.protocol?"http:":j.protocol,l="tmpl",m=0,n={prefixComponent:"/",prefixTemplate:"/",requireList:[],domParser:k+"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js",templateEngine:k+"//cdnjs.cloudflare.com/ajax/libs/hogan.js/3.0.0/hogan.js",compile:function(a){return Hogan.compile(a)},render:function(a,b,c){return a.render(b,c)}},o=function(a){var b=this;a=a||{},b.id=++m;for(var c in n)b[c]=n[c];for(var c in a)b[c]=a[c];b.sourceRoot||(b.sourceRoot=j.pathname.split("/").slice(0,-1).join("/")+"/"),b._classes={}},p=function(b,d,e){var f=this;"function"==typeof b&&(e=b,b=null,d=null),f.$root=b||$(a.document);var g=f.$root.attr(c);if(g)f.requireComponent(g,function(a){var b=new a(g,f.$root,f);b.load(d,function(){e&&e()})});else{var h=new i("",f.$root,f);h.loadChildren(function(){h.rendered=!0,e&&e()})}};o.prototype={init:function(a){var b=this,c=[b.domParser,b.templateEngine].concat(b.requireList);b.require(c,function(){$.event.special.destroyed={remove:function(a){a.handler&&a.handler()}},a(b)})},resolve:function(a){return 0===a.indexOf("http")||0===a.indexOf("//")?a:this.sourceRoot+(0===a.indexOf("/")?a.slice(1):a)},require:function(a,b){var c=this;if(Array.isArray(a)){var d=a.map(function(a){return c.resolve(a)});e(d,h,b)}else{var f=c.resolve(a);h(f,b)}},getTemplate:function(a,b){var c=this,d=a.split(".").pop();if(d!==l){var e=c.$root.find('script[name="template_'+a+'"]');if(e.length>0)return b(e.html())}var f=c.prefixTemplate+a+(d!=l?"."+l:"");c.require(f,b)},defineComponent:function(a,b,c){this._classes[a]=(c||i).extend(b||{})},requireComponent:function(){var a=[],b=!1,c=function(){if(a.length){for(var d=[];a.length;){var g=a[0];if(f){if(g.f.id!==f.id)break}else f=g.f;a.shift(),d.push(g)}d.length&&(b=!0,e(d,function(a,b){var c=a.f.prefixComponent+a.name+".js";a.f.require(c,function(){a.cb(a.f._classes[a.name]),b()})},function(){f=null,b=!1,c()}))}};return function(e,f){var g=this,h=g._classes[e];if(h)f(h);else{var i=!!a.length;a.push({f:g,name:e,cb:f}),i||b||d(c)}}}()};var q=[];b?(o.prototype._build=p,o.prototype.build=function(a,b,c){var d=this;q.push(function(){d._build(a,b,function(){g.publish("f.build.done",d.id,d),c&&c()})})}):o.prototype.build=p,a.F={all:{},Pubsub:g,ComponentBase:i,component:function(a,b,c){f.defineComponent(a,b,c)},createInstance:function(a,b){"function"==typeof a&&(b=a,a=null);var c=new o(a);c.init(b)},buildStatic:function(){q.forEach(function(a){a()})}}}()}(window);
//# sourceMappingURL=fractal.min.js.map