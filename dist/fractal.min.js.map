{"version":3,"file":"fractal.min.js","sources":["fractal.js"],"names":["global","setImmediate","handleMessage","event","source","window","data","messageName","stopPropagation","timeouts","length","fn","shift","Date","getTime","addEventListener","push","postMessage","forEachAsync","items","done","count","left","createAsyncOnce","listeners","key","cb","f","q","Pubsub","topics","seq","publish","topic","from","subscribers","i","subscribe","token","unsubscribe","splice","require","cache","asyncOnce","_methods","js","url","el","document","createElement","src","onload","onreadystatechange","state","this","readyState","getElementsByTagName","appendChild","css","rel","href","ajax","xhr","XMLHttpRequest","open","status","res","responseText","send","getMethod","name","split","pop","main","err","console","error","location","protocol","COMPONENT_ATTR","TMPL_EXT","Env","idSeq","defaults","prefixComponent","prefixTemplate","requireList","domParser","templateEngine","compile","text","Hogan","render","template","options","self","id","sourceRoot","slice","join","pathname","components","proto","prototype","init","unshift","$","special","destroyed","remove","o","handler","build","$container","param","$root","componentName","attr","c","Component","load","timeEnd","loadChildren","resolveUrl","indexOf","names","Array","isArray","urls","map","v","getTemplate","ext","$tmpl","find","html","requireComponent","requireComponentClass","Class","initializing","fnTest","test","xyz","extend","prop","_super","tmp","ret","apply","arguments","constructor","callee","__noImpl","env","bind","rendered","subscribeList","buffered","templateName","resetDisplay","on","unload","getData","partials","afterRender","myselfLoaded","allLoaded","contents","els","len","container","componentClassName","component","list","currentEnv","defineComponentClass","object","base","Error","_queue","next","nameDict","cbArray","task","nameArray","F","ComponentBase","createEnv"],"mappings":"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"}